OpenLayers.Layer.EZWMS = OpenLayers.Class(OpenLayers.Layer.Grid, { DEFAULT_PARAMS: { service: "WMS", version: "1.1.1", request: "GetMap", styles: "", format: "image/jpeg" }, isBaseLayer: !0, encodeBBOX: !1, noMagic: !1, yx: {}, initialize: function (e, t, r, a) { var s = []; r = OpenLayers.Util.upperCaseObject(r), parseFloat(r.VERSION) >= 1.3 && !r.EXCEPTIONS && (r.EXCEPTIONS = "INIMAGE"), s.push(e, t, r, a), OpenLayers.Layer.Grid.prototype.initialize.apply(this, s), OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), !this.noMagic && this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != a && a.isBaseLayer || (this.isBaseLayer = !1), "image/jpeg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png")) }, clone: function (e) { return null == e && (e = new OpenLayers.Layer.WMS(this.name, this.url, this.params, this.getOptions())), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [e]) }, reverseAxisOrder: function () { var e = this.projection.getCode(); return parseFloat(this.params.VERSION) >= 1.3 && !!(this.yx[e] || OpenLayers.Projection.defaults[e] && OpenLayers.Projection.defaults[e].yx) }, getURL: function (e) { e = this.adjustBounds(e); var t = this.getImageSize(), r = {}, a = this.reverseAxisOrder(), s = new OpenLayers.Projection("EPSG:3857"), i = new OpenLayers.Projection("EPSG:4326"); e = e.transform(s, i), r.BBOX = this.encodeBBOX ? e.toBBOX(null, a) : e.toArray(a), r.WIDTH = t.w, r.HEIGHT = t.h; var n = this.getFullRequestString(r); return n + "&z=" + this.map.getZoom() }, mergeNewParams: function (e) { var t = OpenLayers.Util.upperCaseObject(e), r = [t]; return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, r) }, getFullRequestString: function (e) { var t = this.map.getProjectionObject(), r = this.projection && this.projection.equals(t) ? this.projection.getCode() : t.getCode(), a = "none" == r ? null : r; return parseFloat(this.params.VERSION) >= 1.3 ? this.params.CRS = a : this.params.SRS = a, "boolean" == typeof this.params.TRANSPARENT && (e.TRANSPARENT = this.params.TRANSPARENT ? "TRUE" : "FALSE"), OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, arguments) }, CLASS_NAME: "OpenLayers.Layer.WMS" });